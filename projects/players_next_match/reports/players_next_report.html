<!doctype html>
<html lang="en"><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Players Next Match — Report</title>

<style>
:root { --bg:#0b0f19; --card:#111827; --muted:#9CA3AF; --ok:#10B981; --no:#EF4444; --ink:#E5E7EB; }
* { box-sizing:border-box }
body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin:24px; background:var(--bg); color:var(--ink); }
h1,h2 { margin: 0.7rem 0 0.4rem; }
.container { max-width: 1200px; margin: 0 auto; }
.card { background:var(--card); border-radius:16px; padding:18px 16px; box-shadow:0 6px 24px rgba(0,0,0,.25); margin-bottom:18px; }
.grid { display:grid; gap:12px; grid-template-columns: repeat(4, minmax(0,1fr)); }
.kpi { padding:14px; border-radius:14px; background:rgba(255,255,255,.04); text-align:center; }
.kpi h3 { font-size:0.9rem; color:var(--muted); margin:0 0 6px; }
.kpi .v { font-size:1.2rem; font-weight:700; }
.badge { display:inline-block; padding:2px 10px; border-radius:999px; font-weight:700; }
.badge.yes { background:rgba(16,185,129,.15); color:#10B981; }
.badge.no  { background:rgba(239,68,68,.18); color:#F87171; }
table { width:100%; border-collapse:collapse; }
th,td { padding:8px 10px; border-bottom:1px solid rgba(255,255,255,.08); text-align:left; }
th { color:var(--muted); cursor:pointer; position:sticky; top:0; background:var(--card); }
tr:hover { background:rgba(255,255,255,.04); }
pre { white-space:pre-wrap; color:#E5E7EB; background:rgba(255,255,255,.04); padding:12px; border-radius:12px; }
a { color:#93C5FD; text-decoration:none; }
.footer { color:var(--muted); font-size:0.9rem; }
</style>
<script>
function sortTable(id, col){
  const t = document.getElementById(id); const tb = t.tBodies[0];
  const asc = t.getAttribute('data-asc') !== 'true';
  const rows = Array.from(tb.rows);
  rows.sort((a,b)=>{
    const A=a.cells[col].innerText.trim(), B=b.cells[col].innerText.trim();
    const nA=parseFloat(A.replace(/[^0-9.-]/g,'')), nB=parseFloat(B.replace(/[^0-9.-]/g,''));
    const bothNum=!isNaN(nA)&&!isNaN(nB);
    if(bothNum) return asc? nA-nB : nB-nA;
    return asc? A.localeCompare(B) : B.localeCompare(A);
  });
  rows.forEach(r=>tb.appendChild(r)); t.setAttribute('data-asc', asc?'true':'false');
}
function enableSort(id){ document.querySelectorAll('#'+id+' th').forEach((th,i)=> th.onclick=()=>sortTable(id,i)); }
</script>

</head>
<body>
  <div class="container">
    
    <div class="card">
      <h1>Players — Next Match Prediction</h1>
      <div class="grid" style="grid-template-columns:repeat(4,minmax(0,1fr)); margin-top:8px;">
        <div class="kpi"><h3>Best model</h3><div class="v">DecisionTree</div></div>
        <div class="kpi"><h3>Macro F1 (valid)</h3><div class="v">0.500</div></div>
        <div class="kpi"><h3>Cutoff date (80/20)</h3><div class="v">2024-11-24</div></div>
        <div class="kpi"><h3>Players scored</h3><div class="v">1</div></div>
      </div>
      <div style="color:var(--muted); margin-top:6px;">Generated 2025-08-12 22:23 — threshold 0.50 (predict “YES” if prob ≥ threshold)</div>
    </div>
    

    <div class="card">
      <h2>Top predicted to play</h2>
      <table border="1" class="dataframe" id="tbl_top">
  <thead>
    <tr style="text-align: right;">
      <th>player_id</th>
      <th>player_name</th>
      <th>team</th>
      <th>opponent</th>
      <th>position</th>
      <th>home_away</th>
      <th>match_date</th>
      <th>minutes_last_1</th>
      <th>minutes_last_3</th>
      <th>started_last_match</th>
      <th>days_since_last_appearance</th>
      <th>matches_last_14d</th>
      <th>pred_proba_play</th>
      <th>will_play</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Alex Meyer</td>
      <td>Alpha FC</td>
      <td>Bravo United</td>
      <td>GK</td>
      <td>Away</td>
      <td>2024-12-21</td>
      <td>55.0</td>
      <td>253.0</td>
      <td>1</td>
      <td>7.0</td>
      <td>2</td>
      <td>0.0</td>
      <td><span class="badge no">NO</span></td>
    </tr>
  </tbody>
</table>
      <script>enableSort('tbl_top');</script>
    </div>

    <div class="card">
      <h2>All predictions</h2>
      <table border="1" class="dataframe" id="tbl_all">
  <thead>
    <tr style="text-align: right;">
      <th>player_id</th>
      <th>player_name</th>
      <th>team</th>
      <th>opponent</th>
      <th>position</th>
      <th>home_away</th>
      <th>match_date</th>
      <th>minutes_last_1</th>
      <th>minutes_last_3</th>
      <th>started_last_match</th>
      <th>days_since_last_appearance</th>
      <th>matches_last_14d</th>
      <th>pred_proba_play</th>
      <th>will_play</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Alex Meyer</td>
      <td>Alpha FC</td>
      <td>Bravo United</td>
      <td>GK</td>
      <td>Away</td>
      <td>2024-12-21</td>
      <td>55.0</td>
      <td>253.0</td>
      <td>1</td>
      <td>7.0</td>
      <td>2</td>
      <td>0.0</td>
      <td><span class="badge no">NO</span></td>
    </tr>
  </tbody>
</table>
      <script>enableSort('tbl_all');</script>
    </div>

    <div class="card">
      <h2>Training metrics</h2>
      <h3 style='margin:0.2rem 0 0.4rem'>LogisticRegression</h3><pre>              precision    recall  f1-score   support

           0      0.250     1.000     0.400         1
           1      0.000     0.000     0.000         3

    accuracy                          0.250         4
   macro avg      0.125     0.500     0.200         4
weighted avg      0.062     0.250     0.100         4
</pre>
<h3 style='margin:0.2rem 0 0.4rem'>DecisionTree</h3><pre>              precision    recall  f1-score   support

           0      0.333     1.000     0.500         1
           1      1.000     0.333     0.500         3

    accuracy                          0.500         4
   macro avg      0.667     0.667     0.500         4
weighted avg      0.833     0.500     0.500         4
</pre>
<h3 style='margin:0.2rem 0 0.4rem'>RandomForest</h3><pre>              precision    recall  f1-score   support

           0      0.000     0.000     0.000         1
           1      0.667     0.667     0.667         3

    accuracy                          0.500         4
   macro avg      0.333     0.333     0.333         4
weighted avg      0.500     0.500     0.500         4
</pre>
    </div>

    

    
    <div class="card footer">
      <div><strong>Sources</strong></div>
      <ul>
        <li>Pandas: <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.to_html.html">DataFrame.to_html</a></li>
        <li>scikit-learn Pipeline: <a href="https://scikit-learn.org/stable/modules/generated/sklearn.pipeline.Pipeline.html">docs</a>; ColumnTransformer: <a href="https://scikit-learn.org/stable/modules/generated/sklearn.compose.ColumnTransformer.html">docs</a></li>
        <li>Estimators — LogisticRegression, DecisionTreeClassifier, RandomForestClassifier: <a href="https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LogisticRegression.html">LR</a>, <a href="https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeClassifier.html">DT</a>, <a href="https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html">RF</a></li>
        <li>Classification metrics text: <a href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.classification_report.html">classification_report</a></li>
        <li>Time-aware CV guidance: <a href="https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.TimeSeriesSplit.html">TimeSeriesSplit</a></li>
      </ul>
    </div>
    
  </div>
</body></html>